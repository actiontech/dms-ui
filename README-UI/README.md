# 前端 UI 设计规范

## 目的

本文档旨在为前端团队提供一致性和规范性的UI设计指导，以确保项目中的界面设计风格、布局和交互的一致性，并提高用户体验和开发效率。

## 设计原则

- 一致性：确保界面元素、布局和交互在整个应用程序中保持一致。

- 可用性：注重用户操作的便利性和直观性。用户应该能够轻松地与界面进行交互，并顺利完成任务，而不需要额外的努力或疑惑。

- 简洁明了：保持界面的简洁性和明了性，避免过多的复杂元素、视觉杂乱和冗余信息。

- 响应式：项目目前设置了最小宽度，需保证在最小宽度范围内样式不会出现崩坏。

## 颜色规范

### 主色调以及字体规范

[Figma](https://www.figma.com/file/l7eIXVVjdlaPwMMXEkG1f5/%E7%88%B1%E5%8F%AF%E7%94%9FSQLE%E5%90%8E%E5%8F%B0?node-id=1084%3A11623&mode=dev)

## 图标规范

1. 图标格式：项目中默认采用SVG格式的图标。SVG格式的图标具有矢量特性，可以无损缩放而不失真，适应不同尺寸的展示。
2. 图标存放位置：项目中的公共图标统一存放在`shared/lib/Icon`目录下，特殊的图标存放在各个项目的`src/icon`目录下。后续计划将图标进行统一抽离，形成一个类似于`@ant-design/icons`的公共包，并提供预览和搜索功能。
3. 图标命名和定义规范：后续改造后的公共图标包将遵循一套统一的图标命名规范和定义规范。这些规范将有助于更好地管理和使用图标。
4. 图标颜色：改造后图标的颜色将与父元素的颜色保持一致，采用 currentColor 表示。在使用 currentColor 时，需要确保图标颜色与设计图上保持一致。
5. 图标与文字间隔：图标与文字之间应有一定的间隔，并且不同位置的间隔大小可能不相同。例如，标题处的图标与文字的间隔可能与表格中图标与文字的间隔不同，需要根据具体情况进行调整。
6. 需要注意实际 Icon svg 的文件宽高，与设计图宽高不一致的情况。
7. [如何添加一个自定义图标?] todo..

示例：

<img src="./image/svg-icon-example.svg" style="width:100%"/>

## 布局规范

项目采用了左右布局的风格，具体细节如下：

1.左侧菜单栏具有固定宽度为220像素（px）。这意味着菜单栏的宽度将保持不变，无论其内容的多少。
2.右侧内容区域采用自适应宽度，并且最小宽度为1060像素（px）。这表示右侧内容区域的宽度会根据浏览器窗口的大小自动调整，但不会小于1060像素，以确保内容在较小的屏幕上也能够正常显示。
  
### 左侧菜单栏

左侧菜单栏具有以下特点：

1. 使用position：sticky; top：0;属性来实现固定在顶部，不随着右侧页面的滚动条滚动而滚动。你可以在[这里](https://developer.mozilla.org/zh-CN/docs/Web/CSS/position#sticky)了解更多关于sticky属性的信息。
2. 左侧菜单栏拥有自己的滚动条。在菜单数量较多的情况下，菜单栏会出现滚动条，使用户可以独立滚动菜单内容，而不影响右侧页面的滚动。
3. 左侧菜单栏具有左右两侧各为16像素的内边距。

### 右侧主体页面

右侧主体页面通常采用上下结构，并由以下两种常见的组合方式构成：

1. Header + Content：这种结构适用于需要在页面中展示一块较大内容的情况。Header通常包含页面的标题、导航以及其他相关操作，而Content则是主要的页面内容区域。
2. Header + TableToolbar + Table：这种结构适用于需要展示表格数据的情况。除了Header和Content外，还包含TableToolbar作为表格的操作栏，可以包括搜索框、筛选条件、新增按钮等功能，而Table则是实际的表格展示区域。
3. 需要注意在当前页面是否需要将 Header 部分固定在页面顶部(例如部分表单页面)。

<img src="./image/fixed-page-header-example.png" style="width:100%" />

## 组件规范

<h3 id="左侧菜单">左侧菜单</h3>

1. Title

   - 需要注意字体粗细以及字体大小样式。
   - 默认标题以及自定义标题两种情况下的字体颜色。
  
2. 项目选择器

   在 [下拉选择器](#下拉选择器) 的基础上做以下调整
   - 添加 prefix icon，需要注意 icon 颜色和尺寸。
   - 背景颜色调整为：`var(--color-fill-tertiary，#F7F6F4);`
   - 边框颜色固定为：`var(--color-border-secondary，#E8E7E6);`
   - 下拉菜单出现位置调整至右侧，同时改变尾部 Icon. 由向下的方向调整为向右。
   - 下拉菜单内容调整为自定义菜单，拥有搜索框、MenuItems以及按钮，需要注意该部分的样式细节。

3. 菜单选项

   基于 antd 的 [Menu](https://ant-design.antgroup.com/components/menu-cn) 做了一些样式上的细节调整.

   注意事项:
   - 通过调整菜单项的 padding 和图标与文字之间的 margin 实现内部边距和间隔的调整。
   - 菜单项 Hover 状态、选中状态和常态之间的区别。例如背景颜色、前缀 Icon 和尾部 Icon 的变化。
   - 下拉菜单与常规菜单项之间的区别。
   - 菜单组与常规菜单之间的区别。
   - 菜单项里的文本字体样式。

4. 底部用户个人中心和全局配置

   - 在底部用户个人中心和全局配置中使用公共的[用户头像组件](#用户头像组件) ，确保头像的一致性和可复用性。
   - 对于用户菜单中的用户名文本，请使用与设计一致的字体样式，如字体大小、颜色和字体样式，以确保整体视觉一致性和可读性。
   - 针对全局设置中的标题部分和尾部文本，请使用与设计一致的字体样式，包括字体大小、颜色和字体样式，以确保信息的可读性和视觉一致性。
   - 菜单项的样式细节，例如 hover 效果以及内间距以及 Icon 与文本之间的间隔。
   - 主题切换器的样式细节，例如边框颜色以及背景颜色。
   - 在全局设置菜单中，对于激活状态和常态下的菜单项图标，请设置适当的颜色变换，以突出激活状态，并与整体设计风格一致。

<h3 id="按钮">按钮</h3>

> 默认字体样式为: `font-size: 13px;font-weight: 500;line-height: 20px;`

1. 确保按钮使用的类型与设计图一致。根据设计图中的要求，选择正确的按钮类型

2. 保证按钮的阴影效果与设计图一致，以确保整体一致性。

3. 按钮处于点击状态时的样式细节与设计图保持一致，以确保整体一致性。

4. 不同尺寸下按钮的内边距以及字体大小与设计图保持一致，以确保整体一致性。

5. 如果按钮包含图标，请确保图标的颜色与整体设计一致，并设置适当的间隔来调整图标与文本之间的间距。确保图标与文本对齐和平衡。

<img src="./image/basic-button.svg" style="width:100%" />

<h3 id="下拉选择器">下拉选择器</h3>

> 默认字体样式为: `font-size: 14px;font-weight: 400;line-height: 22px;`

1. 不同状态下边框的颜色：确保在不同状态下，如正常、激活和错误状态，边框的颜色与设计一致，以提供一致的视觉反馈。

2. 文本样式：各文本应采用与设计一致的样式，如颜色、字体大小和字体样式，以确保整体一致性。文本类型包括但不限于 placeholder、选中值、错误信息。

3. 多选模式下值的标签样式：对于多选模式下的选中值标签，请使用与设计一致的样式，同时注意处理超长内容，以确保标签可以正确显示。

4. 存在前缀图标的情况：如果下拉选择器具有前缀图标，请确保图标的大小、对齐和颜色与设计一致，以保持统一性。

5. 尾部Arrow Icon的样式以及Clear Icon的样式：对于尾部的展开箭头图标和清除图标，请使用与设计一致的样式，包括颜色、大小和交互效果。

6. 禁用模式下的样式：对于禁用状态的下拉选择器，请使用符合设计规范的样式，如灰色的文本颜色和禁用状态的边框颜色，以明确表达不可编辑的状态。

7. 下拉菜单样式：根据设计规范，确保下拉菜单的样式与其他相关组件一致，包括单选和多选情况。同时，需要注意下拉菜单的宽度，以适应选项内容的长度。

8. 下拉菜单暂无数据以及正在加载数据的样式：根据设计规范，为下拉菜单的暂无数据和正在加载数据的情况提供合适的样式，以向用户传达相关信息。

9. 准确使用组件的尺寸大小：根据设计规范，确保下拉选择器的尺寸与其他相关组件的尺寸一致，如按钮、输入框等，以保持整体视觉平衡和一致性。

10. 在可聚焦状态下需要注意输入的光标样式：对于可聚焦状态下的下拉选择器，请使用与设计一致的样式和颜色，以提供清晰的输入焦点反馈，包括光标样式和颜色。

<h5 style="color:yellow" id="目前项目中下拉菜单中选中样式的背景色使用antd默认设置的背景色与设计图中的灰色存在出入">目前项目中下拉菜单中选中样式的背景色使用antd默认设置的背景色，与设计图中的灰色存在出入</h5>

<img src="./image/basic-select.svg" style="width:100%" />

<img src="./image/basic-select-dropdown.svg" style="width:100%" />

<h3 id="文本输入框">文本输入框</h3>

> 默认字体样式为: `font-size: 14px;font-weight: 400;line-height: 22px;`

1. 不同状态下边框的颜色：确保在不同状态下，如正常、激活和错误状态，边框的颜色与设计一致，以提供一致的视觉反馈。

2. 文本样式：各文本应采用与设计一致的样式，如颜色、字体大小和字体样式，以确保整体一致性。文本类型包括但不限于 placeholder、输入值、错误信息。

3. 拥有前缀Icon和尾部Icon的情况：如果输入框需要显示前缀Icon和尾部Icon，请确保它们的大小、对齐和颜色与设计一致，以保持统一性。

4. 禁用模式下的样式：对于禁用状态的输入框，请使用符合设计规范的样式，如灰色的文本颜色和禁用状态的边框颜色，以明确表达不可编辑的状态。

5. 准确使用组件的尺寸大小：根据设计规范，确保文本输入框的尺寸与其他相关组件的尺寸一致，如按钮、标签等，以保持整体视觉平衡和一致性。

6. 聚焦模式下的输入光标样式：对于输入框在聚焦状态下的光标，请使用与设计一致的样式和颜色，以提供清晰的输入焦点反馈。

7. 正确使用输入框类型：根据需要，选择正确的输入框类型，如数字输入框、密码输入框等。

<img src="./image/basic-input.svg" style="width:100%" />

<h5 style="color:yellow" id="设计图中部分文本域模式的输入框的placeholder带有图标目前只能支持文字模式">设计图中部分文本域模式的输入框的placeholder带有图标，目前只能支持文字模式</h5>

<h3 id="时间选择器">时间选择器</h3>

> 默认字体样式为: `font-size: 14px;font-weight: 500;line-height: 21px`

项目中时间选择器一般有两种模式，一种为最基本的时间选择器，一种为时间范围选择器。具体选择根据需求来定。

1. 样式一致性：确保时间选择器的样式与设计一致。包括选择器的外观、边框样式、背景颜色和字体样式等。
2. 时间格式：根据项目需求和设计规范，选择合适的时间格式进行显示。

<h5 style="color:yellow" id="目前项目中时间范围选择器与设计图存在差异后续会做调整">目前项目中时间范围选择器与设计图存在差异，后续会做调整</h5>

<h3 id="用户头像组件">用户头像组件</h3>

> 默认字体样式为: `font-size: 14px;font-weight: normal;line-height: 30px;`

<h5 style="color:yellow" id="由于目前暂不支持用户自定义头像所以展示无法实现该效果用户头像组件目前展示用户名的首字母并用大写形式展示">由于目前暂不支持用户自定义头像，所以展示无法实现该效果，用户头像组件目前展示用户名的首字母，并用大写形式展示</h5>

当前效果:

<img src="./image/mock-avatar-com.svg" style="width:20%"/>

<h3 id="页眉">页眉</h3>

> 默认字体样式为: `font-size: 16px;font-weight: 600;line-height: 24px;`

页眉一般采用左右布局，具体细节如下：

1. 页眉高度固定为60px，具有底部边框，并在左右两侧设置了40px的内边距。

2. 左侧部分一般用于显示页面标题以及可能的刷新数据按钮。请确保页面标题和刷新按钮的样式保持一致。对于表单页面，左侧通常是返回至列表页的按钮，需要特别注意返回按钮的图标。

3. 右侧部分一般包含页面的功能按钮，这些按钮的类型应为主要按钮（primary）。如果右侧没有任何内容，则可以留空。

<img src="./image/page-header-example.svg" style="width:100%"/>

<h3 id="表单">表单</h3>

> 表单类型的选择规则: 1. 复杂的表单优先选择页面表单。2. 没那么复杂但表单项数大于等于 2 时选择抽屉内表单。 3. 表单项数低于 2 时选择弹窗内表单。

#### 弹窗表单

可参考 [弹窗](#弹窗) 的设计规范。

#### 抽屉内表单

1. 应注意表单与抽屉容器之间的内边距大小，在不同尺寸的抽屉下内边距大小保持一致。

2. 文本样式, 包括但不限于标题文本、说明文字。

3. 操作按钮应固定在抽屉底部。

#### 页面表单

注意事项:

1. 保证表单中各文本信息的样式与设计图一致, 文本内容包括但不限于表单标题、placeholder、表单项说明以及表单错误信息。

2. 表单项的必填标志是否遗漏。

3. 单页面下存在多个表单时, 应保证表单之间的上下间距。

<img src="./image/large-margin-example.png" style="width:100%"/>

<h3 id="表格">表格</h3>

> 默认字体样式为: `font-size: 13px;font-weight: 500;line-height: 20px;`

<h5 style="color:yellow" id="现有表头部分较设计图多了竖线部分用来区分表格列">现有表头部分较设计图多了竖线部分用来区分表格列</h5>

<img src="./image/table-header-border-example.png" style="width:100%"/>

注意事项:

1. 确保表格头和表格体中的文本样式与设计图一致。包括字体、字号、字重和颜色等。

2. 确保表格头和表格体中的内部间距（即单元格内部的间距）与设计图一致。

3. 对于表格列中可能出现的超长数据，需要进行优化处理，以避免破坏表格的布局。

4. 如果表格中存在操作列，确保其中的按钮样式与设计图一致。包括按钮的大小、颜色、图标等。

5. 确保表格中的边框样式与设计图一致。包括边框的粗细、颜色等。

6. 确保表格分页器的样式与设计图一致。

7. 确保不会出现表格底部数据被分页器遮挡住的情况。

8. 对于表格的可点击元素，确保鼠标位于元素时拥有 pointer 样式，以提供合适的交互反馈。

9. 表格列数据为空时，需要填充默认值，一般为 “-”。

<h3 id="气泡确认框">气泡确认框</h3>

> 标题默认字体样式为: `font-size: 14px;font-weight: 500;line-height: 22px;` 消息内容默认字体样式: `font-size: 14px;font-weight: 400;line-height: 22px;`

项目中气泡确认框仅对文本样式有做调整，其余样式继承与 antd 组件。与设计图存在些许出入。

<h3 id="全局消息提示">全局消息提示</h3>

> 默认字体样式为: `font-size: 14px;font-weight: 500;line-height: 22px;`

项目中全局消息提示仅对文本样式有做调整，其余样式继承与 antd 组件。与设计图存在些许出入，需要注意消息类型与设计图一致。

<h3 id="通知提醒框">通知提醒框</h3>

> 标题默认字体样式为: `font-size: 16px;font-weight: 500;line-height: 24px;` 消息内容默认字体样式: `font-size: 14px;font-weight: 400;line-height: 22px;`

项目中通知提醒框仅对文本样式有做调整，其余样式继承与 antd 组件。与设计图存在些许出入，需要注意消息类型与设计图一致。

<h3 id="气泡卡片">气泡卡片</h3>

> 默认字体样式为: `font-size: 13px;font-weight: 400;line-height: 20px;`

注意事项:

1. 确保气泡卡片容器中的文本样式与设计图一致。包括字体、字号、字重、颜色和对齐方式等。
2. 确保气泡卡片使用正确的尺寸，以符合设计图的要求。根据设计图中的尺寸设定，调整气泡卡片的宽度和高度，以保持一致性。
3. 针对气泡卡片中可能出现的超长文本情况，确保内容能够正常显示。
4. 确保气泡卡片的触发方式与设计图一致。

<h3 id="弹窗">弹窗</h3>

> 标题默认字体样式为: `font-size: 20px;font-weight: 600;line-height: 28px;`

注意事项:

1. 确认在使用弹窗时应该使用的尺寸，以符合设计图的要求。
2. 确保弹窗内各文本样式与设计图一致。包括标题、正文、按钮文本等文本样式的字体、字号、字重、颜色和对齐方式等。
3. 确保弹窗内表格样式与设计图一致。包括表格的边框样式、表头样式、行样式、列样式等。
4. 确保弹窗的关闭图标（Close Icon）与设计图一致。
5. 确保弹窗内表单样式与设计图一致。包括表单标题、表单标题说明等。

<h3 id="分段控制器">分段控制器</h3>

> 默认字体样式为: `font-size: 13px;font-weight: 500;line-height: 20px;`

注意事项:

1. 确保分段控制器中的文本样式与设计图一致。包括标签页的字体、字号、字重、颜色和对齐方式等。
2. 如果标签页上存在图标，确保文本与图标之间的间隔与设计图保持一致。
3. 确保标签页在各种状态下的样式与设计图保持一致。例如，鼠标悬停（hover）状态下的样式、选中状态下的样式等。

<h3 id="空状态">空状态</h3>

确保项目中各处表示空状态时的样式皆保持一致。包括文本样式、图标Icon、背景配色等。

<img src="./image/empty-example.svg" style="width:100%"/>

<h3 id="图表">图表</h3>

<h5 style="color:yellow" id="由于使用的是第三方工具ant-design/plots生成图表图表的样式可能会与UI图上的图表有所差异">由于使用的是第三方工具@ant-design/plots生成图表，图表的样式可能会与UI图上的图表有所差异</h5>

第三方工具地址: [@ant-design/plots](https://ant-design-charts.antgroup.com/)

<h3>页面Loading效果</h3>

1. 页面的渲染 loading 规则：从用户获取页面的角度，考虑 loading 的加载。避免一个整体页面出现多个loading。
2. 对于异步加载时，需要添加 Loading 效果。例下拉选择器数据源的获取

### 容易忽略的样式问题

#### 布局边距相关

1. 卡片内标题与内容之间的间距应该保持一致

   <img src="./image/layout-example-1.png" style="width:50%"/>

2. 文本间的间距大小

   <img src="./image/layout-example-2.png" style="width:50%"/>

3. 空间不足的情况下表格列内容是否应该换行

   <img src="./image/layout-example-3.png" style="width:50%"/>

4. 空间不足的情况下文本内容是否应该换行

   <img src="./image/layout-example-4.png" style="width:50%"/>

5. 文字竖直方向的对齐方向

   <img src="./image/layout-example-5.png" style="width:50%"/>

6. 表格列超长内容处理以及表格列默认值的填充

   <img src="./image/layout-example-6.png" style="width:50%"/>

#### 产品文案类问题

1. 当一个文本信息后端返回的数据为 {key: value} 格式时, 应展示 value 而不是 key

   <img src="./image/text-error-example-1.png" style="width:50%"/>

2. 与数据源相关的下拉选择器需要有数据库类型Logo

   <img src="./image/text-example-2.png" style="width:50%"/>

### 差异统计

1. [下拉选择器](#目前项目中下拉菜单中选中样式的背景色使用antd默认设置的背景色与设计图中的灰色存在出入)
2. [时间范围选择器](#目前项目中时间范围选择器与设计图存在差异后续会做调整)
3. [头像组件](#由于目前暂不支持用户自定义头像所以展示无法实现该效果用户头像组件目前展示用户名的首字母并用大写形式展示)
4. [表格](#现有表头部分较设计图多了竖线部分用来区分表格列)
5. [图表](#由于使用的是第三方工具ant-design/plots生成图表图表的样式可能会与UI图上的图表有所差异)
6. [文本域输入框](#设计图中部分文本域模式的输入框的placeholder带有图标目前只能支持文字模式)
7. 图标差异: 目前项目中部分 Icon 并没有和设计图上的 Icon 完全匹配，可能会存在差异。在后续整理前端 Icon 后进行调整。
8. SQL编辑器差异: 由于项目中SQL编辑器为第三方工具，所以会与设计图上存在差异。
9. SQL上传方式差异: 创建工单时上传SQL语句目前与设计图上存在差异。

## 兼容性

DMS-UI 需要支持的最低 chrome 版本为 80. 需保证使用的 css 属性能够支持在 chrome 80 中有正常的表现.

一些常用但不支持 chrome 80 的css 特性:

- [flexbox-gap](<https://caniuse.com/flexbox-gap>)
- 待补充

参考网站: <https://caniuse.com/>
