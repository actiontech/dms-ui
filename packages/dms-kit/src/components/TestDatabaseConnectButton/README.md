---
group:
  title: 业务工具组件
  order: 14
---

# TestDatabaseConnectButton 数据库连接测试按钮

基于 BasicButton 组件封装的数据库连接测试按钮组件，提供了统一的样式规范和完整的测试流程，包括测试状态显示、结果反馈和错误处理。

## 何时使用

- 需要测试数据库连接时
- 需要显示数据库连接测试结果时
- 需要处理连接测试的加载状态时
- 需要显示连接失败的具体原因时
- 需要保持与设计系统一致的按钮组件样式时

## 代码演示

### 基础用法

<code src="./demo/basic.tsx"></code>

### 测试状态管理

<code src="./demo/testStates.tsx"></code>

### 自定义配置

<code src="./demo/customConfig.tsx"></code>

## API

### TestDatabaseConnectButton

| 参数 | 说明 | 类型 | 默认值 | 版本 |
| --- | --- | --- | --- | --- |
| initHide | 是否初始隐藏测试结果 | `boolean` | `true` | - |
| onClickTestButton | 点击测试按钮时的回调函数 | `() => void` | - | - |
| loading | 是否处于测试加载状态 | `boolean` | - | - |
| connectAble | 数据库是否可连接 | `boolean` | - | - |
| connectDisableReason | 连接失败的原因描述 | `string` | - | - |

## 设计规范

### 样式特性

- 统一的按钮样式设计
- 基于主题的色彩系统
- 支持加载状态显示
- 集成结果反馈组件
- 响应式布局支持

### 布局规范

- 垂直布局排列
- 按钮和结果信息分离
- 统一的间距和对齐
- 支持长文本显示

### 主题配置

组件样式通过主题系统进行配置，支持以下主题变量：

```typescript
theme.sharedTheme.components.basicButton = {
  // 继承 BasicButton 的主题配置
}
```

## 功能特性

### 测试流程管理

组件自动管理测试流程的各个状态：
1. **初始状态**: 隐藏测试结果
2. **测试中**: 显示加载状态和"测试中"提示
3. **测试成功**: 显示成功信息和绿色状态
4. **测试失败**: 显示失败信息和红色状态，包含具体原因

### 状态显示

- **加载状态**: 按钮显示 loading 状态
- **测试中提示**: 显示"测试中..."链接文本
- **成功状态**: 使用 ReminderInformation 组件显示成功信息
- **失败状态**: 使用 ReminderInformation 组件显示失败信息和原因

### 错误处理

- 支持自定义错误原因描述
- 提供友好的错误提示
- 集成国际化支持
- 错误信息可配置

## 使用场景

### 数据库配置页面

在数据库配置页面中，用户配置完连接参数后，可以点击测试按钮验证配置是否正确。

### 连接参数验证

在创建或编辑数据库连接时，提供实时验证功能，确保连接参数的有效性。

### 故障排查

当数据库连接出现问题时，可以通过测试按钮快速诊断连接状态和具体问题。

## 注意事项

1. 组件需要包裹在 `ConfigProvider` 中以确保主题正常工作
2. `onClickTestButton` 回调函数需要处理实际的数据库连接测试逻辑
3. `loading` 状态应该由父组件根据实际的测试过程进行控制
4. `connectAble` 和 `connectDisableReason` 应该在测试完成后更新
5. 组件依赖 ReminderInformation 组件显示测试结果

## 最佳实践

1. **状态管理**: 在父组件中统一管理测试状态
2. **错误处理**: 提供详细的错误原因描述，帮助用户快速定位问题
3. **用户体验**: 在测试过程中提供清晰的视觉反馈
4. **国际化**: 利用组件的国际化支持，提供多语言界面
5. **性能优化**: 避免频繁的数据库连接测试，合理控制测试频率

## 更新日志

- **1.0.0**: 初始版本，基于 BasicButton 封装
- 支持数据库连接测试流程
- 集成测试状态显示和结果反馈
- 支持自定义错误原因描述
- 集成 ReminderInformation 组件
- 统一的样式规范和主题系统集成
- 完整的国际化支持
